---
tip: translate by openai@2023-07-06 21:38:25
url: https://www.mathworks.com/help/rtw/ug/build-process-file-dependencies.html
title: Manage Build Process File Dependencies - MATLAB & Simulink --- 管理构建过程文件依赖性 - MATLAB & Simulink
date: 2023-07-06 21:34:23
tag:
summary: Work with generated source files and dependency files that the code generator produces.
---
## Manage Build Process File Dependencies

An important control of the size of generated code is managing the number and size of included files (dependencies). To reduce the number of system header files and generated header files that generated code requires, it is helpful to understand the dependencies that the build process generates and the conditions that lead to dependencies.

> 重要的控制生成代码的大小的方法是管理包含的文件（依赖）的数量和大小。为了减少生成代码所需的系统头文件和生成的头文件的数量，了解构建过程产生的依赖关系以及导致依赖关系的条件是有帮助的。

The dependency relationships among generated source and header files appear in the figure. Arrows coming from a file point to files it includes. Other dependencies exist, for example, on Simulink® header files `tmwtypes.h` and `simstruc_types.h`, plus C or C++ library files. The figure maps inclusion relations between only those files that are generated in the build folder. These files can reference utility and model reference code located in a code generation folder. For more information about the folders and files that the build process creates, see [Manage Build Process Folders](https://www.mathworks.com/help/rtw/ug/build-process-folders.html) and [Manage Build Process Files](https://www.mathworks.com/help/rtw/ug/build-process-files.html).

> 图中显示了生成源文件和头文件之间的依赖关系。从文件指向的箭头指向该文件包含的文件。还存在其他依赖关系，例如 Simulink® 头文件 `tmwtypes.h` 和 `simstruc_types.h` 以及 C 或 C++ 库文件。图中只映射了构建文件夹中生成的文件之间的包含关系。这些文件可以引用位于代码生成文件夹中的实用程序和模型参考代码。有关构建过程创建的文件夹和文件的更多信息，请参阅[管理构建过程文件夹](https://www.mathworks.com/help/rtw/ug/build-process-folders.html)和[管理构建过程文件](https://www.mathworks.com/help/rtw/ug/build-process-files.html)。

The two tables identify the conditions that control creation of dependency files for GRT and ERT targets. To manage build-related dependencies, consider how these conditions apply to your model and code generation process. Then, configure model parameters and code generation options to manage build process file dependencies.

> 两张表标识出控制 GRT 和 ERT 目标依赖文件创建的条件。为了管理构建相关的依赖性，请考虑这些条件如何应用于您的模型和代码生成过程。然后，配置模型参数和代码生成选项以管理构建过程文件依赖性。

Due to differences in file packaging options for code generated with ERT-based system target files, the file dependencies differ slightly from file packaging for code generated with GRT-based system target files. See [Manage File Packaging of Generated Code Modules](https://www.mathworks.com/help/ecoder/ug/generate-code-modules.html) (Embedded Coder).

> 由于使用基于 ERT 的系统目标文件生成的代码的文件打包选项之间的差异，与使用基于 GRT 的系统目标文件生成的代码的文件依赖关系稍有不同。请参阅[管理生成的代码模块的文件打包](https://www.mathworks.com/help/ecoder/ug/generate-code-modules.html)（嵌入式编码器）。

The parent system header files (``_`model`_.h``) include child subsystem header files (``_`subsystem`_.h``). In more layered models, subsystems similarly include their children's header files in the model hierarchy. As a consequence, subsystems are able to view recursively into their descendant subsystems and view into the root system because every ``_`subsystem`_.c`` or ``_`subsystem`_.cpp`` includes ``_`model`_.h`` and ``_`model`__private.h``.

> 父系统头文件（``_`model`_.h``）包括子子系统头文件（``_`subsystem`_.h``）。在更多分层模型中，子系统类似地将其子系统的头文件包含在模型层次结构中。因此，子系统可以递归查看其后代子系统，并查看根系统，因为每个 ``_`subsystem`_.c`` 或 ``_`subsystem`_.cpp`` 都包含 ``_`model`_.h`` 和 ``_`model`__private.h``。

In the figure, files ``_`model`_.h``, ``_`model`__private.h``, and ``_`subsystem`_.h`` depend on the header file `rtwtypes.h`. For ERT system target files, the dependency on `rtwtypes.h` exists only if **Data type replacement** is set to `Use coder typedefs`.

> 在图中，文件 ``_`model`_.h``，``_`model`__private.h`` 和 ``_`subsystem`_.h`` 依赖于头文件 `rtwtypes.h`。对于 ERT 系统目标文件，只有当**数据类型替换**设置为 `使用编码器类型定义` 时，才存在对 `rtwtypes.h` 的依赖关系。

If you use system target files that are not based on the ERT system target file, the source files that you generate can have additional dependencies on `tmwtypes.h` and `simstruc_types.h`.

> 如果您使用不基于 ERT 系统目标文件的系统目标文件，则生成的源文件可能会对 `tmwtypes.h` 和 `simstruc_types.h` 有额外的依赖关系。

![](https://www.mathworks.com/help/rtw/ug/rtw_generated_file_dependencies.png)

### System Header Files

The system header files make function declarations, type definitions, and macro definitions available to the legacy or external code. Some code generation scenarios require including header files that are specific to the code generator product.

> 系统头文件使函数声明、类型定义和宏定义可供遗留或外部代码使用。某些代码生成场景需要包括与代码生成器产品特定的头文件。

The code generator includes some system header files for broadly defined cases. For example, generated code includes `<stddef.h>` when the model contains a utility function that requires this header file. This approach helps identify header file dependencies:

> 代码生成器包括一些系统头文件用于广泛定义的情况。例如，当模型包含需要此头文件的实用程序函数时，生成的代码将包括 `<stddef.h>`。这种方法有助于识别头文件依赖关系：

1. Set model configuration parameter **Shared code placement** to `'Shared location'` and build the model. The code generator places the utility functions in `__sharedutils` folder.

> 1. 将模型配置参数**共享代码放置**设置为 `'共享位置'`，并构建模型。代码生成器将实用函数放置在 `__sharedutils` 文件夹中。

2. Use a find-in-file utility (for example, grep utility) to search the `.c` and `.h` files in the `__sharedutils` folder for `#include`. The search results list the utilities with header file dependencies.

> 使用查找文件实用程序（例如，grep 实用程序）搜索 `__sharedutils` 文件夹中的 `.c` 和 `.h` 文件中的 `#include`。搜索结果列出具有头文件依赖关系的实用程序。

3. Use this information to identify utilities to remove from the model and reduce header file dependencies in the generated code.

> 使用此信息来识别要从模型中移除的实用程序，并减少生成代码中的头文件依赖。

For more information, see [Generate Shared Utility Code for Fixed-Point Functions](https://www.mathworks.com/help/rtw/ug/shared-fixed-point-utility-functions.html).

> 更多信息，请参阅[为固定点函数生成共享实用程序代码](https://www.mathworks.com/help/rtw/ug/shared-fixed-point-utility-functions.html)。

<table><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th>System Header File</th><th>Description and Inclusion Conditions for GRT or ERT System Target Files</th></tr></thead><tbody><tr><td><p><code>&lt;math.h&gt;</code></p></td><td><p>Defines math constants</p><a name="d124e59311"></a><p>GRT—Generated code does not include this file.</p><p>ERT—Generated code includes this file when the code honors your model configuration for solver <strong>Stop time</strong> and either:</p><div><ul><li><p>Your model configuration enables parameter . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></li><li><p>Your model configuration enables parameter <strong>External mode</strong>.</p></li></ul></div></td></tr><tr><td><p><code>&lt;float.h&gt;</code></p></td><td><p>Provides floating-point math functions</p><a name="d124e59337"></a><p>GRT—Generated code includes this file when your model contains a floating-point math function.</p><p>ERT—Generated code includes this file when your model contains a floating-point math function, unless a code replacement library entry overrides the function. For more information, see <a href="https://www.mathworks.com/help/rtw/ug/choose-a-code-replacement-library-sc.html">Choose a Code Replacement Library</a>.</p></td></tr><tr><td><p><code>&lt;stddef.h&gt;</code></p></td><td><p>Defines NULL</p><a name="d124e59350"></a><p>GRT and ERT—Generated code includes this file when your model contains a utility function that requires this file.</p></td></tr><tr><td><p><code>&lt;stdio.h&gt;</code></p></td><td><p>Provides file I/O functions</p><a name="d124e59359"></a><p>GRT—Generated code includes this file when your model includes a <a href="https://www.mathworks.com/help/simulink/slref/tofile.html"><span>To File</span></a> block.</p><p>ERT—Generated code includes this file when either:</p><div><ul><li><p>Your model includes a <a href="https://www.mathworks.com/help/simulink/slref/tofile.html"><span>To File</span></a> block.</p></li><li><p>Your model configuration enables parameter . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></li></ul></div></td></tr><tr><td><p><code>&lt;stdlib.h&gt;</code></p></td><td><p>Provides utility functions such as the integer versions of <code>div()</code> and <code>abs()</code></p><a name="d124e59392"></a><p>GRT—Generated code includes this file when either:</p><div><ul><li><p>Your model includes a Stateflow<sup>®</sup> chart.</p></li><li><p>Your model includes a math function block configured for <code>mod()</code> or <code>rem()</code>, which generate calls to <code>div()</code>.</p></li></ul></div><p>ERT—Generated code includes this file when either:</p><div><ul><li><p>Your model includes a Stateflow chart, and you select model configuration parameter <strong>Support: floating-point numbers</strong>.</p></li><li><p>Your model includes a math function block configured for <code>mod()</code> or <code>rem()</code>, which generate calls to <code>div()</code>.</p></li></ul></div></td></tr><tr><td><p><code>&lt;string.h&gt;</code></p></td><td><p>Provides memory functions such as <code>memset()</code> and <code>memcpy()</code></p><a name="d124e59442"></a><p>GRT—Generated code includes this file when your model initialization code calls <code>memset()</code>.</p><p>ERT—Generated code includes this file when a block or model initialization code calls <code>memcpy()</code> or <code>memset()</code>.</p><p>For a list of relevant blocks, in the Command Window, type:</p><div><pre>showblockdatatypetable
</pre></div><p>Look for blocks with the N2 note. To omit calls to <code>memset()</code> from model initialization code, select model configuration parameters <strong>Remove root level I/O zero initialization</strong> and <strong>Remove internal data zero initialization</strong>.</p></td></tr></tbody></table>

### Code Generator Header Files

Dependencies in the table for generated header files apply to the system target files `grt.tlc` and `ert.tlc`. System target files derived from these base system target files can have additional header dependencies. Code generation for blocks from blocksets, embedded targets, and custom S-functions can introduce additional header dependencies.

> 表中用于生成的头文件的依赖关系适用于系统目标文件 `grt.tlc` 和 `ert.tlc`。从这些基础系统目标文件导出的系统目标文件可能具有附加的头文件依赖关系。从 Blockset、嵌入式目标和自定义 S 函数生成的代码可能会引入附加的头文件依赖关系。

<table><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr><th>Header File</th><th>Description and Inclusion Conditions for GRT or ERT System Target Files</th></tr></thead><tbody><tr><td><p><code>builtin</code><code>_typeid</code><code>_types.h</code></p></td><td><p>Defines an enumerated type corresponding to built-in data types</p><p>GRT and ERT—Generated code includes this file when one or more of these conditions apply:</p><div><ul><li><p>Your model contains a Stateflow chart that uses messages.</p></li><li><p>Your model configuration enables: . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></li><li><p>Your model configuration selects C API options at &gt; .</p></li></ul></div></td></tr><tr><td><p><code>dt_info.h</code></p></td><td><p>Defines data structures for external mode</p><a name="d124e59522"></a><p>GRT and ERT—Generated code includes this file when your model configuration enables external mode.</p></td></tr><tr><td><p><code>ext_work.h</code></p></td><td><p>Defines external mode functions</p><a name="d124e59531"></a><p>GRT and ERT—Generated code includes this file when your model configuration enables external mode.</p></td></tr><tr><td><p><code>fixedpoint.h</code></p></td><td><p>Provides fixed-point support for noninlined S-functions</p><a name="d124e59540"></a><p>GRT—Generated code includes this file.</p><p>ERT—Generated code includes this file when either:</p><div><ul><li><p>Your model uses noninlined S-functions.</p></li><li><p>Your model configuration selects parameter <strong>Classic call interface</strong>.</p></li></ul></div></td></tr><tr><td><p><code>model</code><code>_reference</code><code>_types.h</code></p></td><td><p>Contains type definitions for timing bridges</p><p>GRT and ERT—Generated code includes this file when building a reference model or building a model that contains model blocks.</p></td></tr><tr><td><p><code><em><code>model</code></em>_types.h</code></p></td><td><p>Defines model-specific data types</p><p>GRT and ERT—Generated code includes this file.</p></td></tr><tr><td><p><code>multiword</code><code>_types.h</code></p></td><td><p>Contains type definitions for multiword-wide data types and their word-size chunks</p><p>GRT and ERT—Generated code includes this file when one or more of these conditions apply:</p><div><ul><li><p>Your model uses multiword data types.</p></li><li><p>Your model configuration selects parameter . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></li><li><p>Your model configuration selects <strong>External mode</strong>.</p></li></ul></div><p>For a model that uses multiword data types, the code generator overwrites the file if the data types are greater in length than those of the model for which code was last generated. To avoid overwriting this file, set:</p><div><ul><li><p><code>MultiwordTypeDef</code> to <code>'User defined'</code></p></li><li><p><code>MultiwordLength</code> to the biggest length that is required by your models.</p></li></ul></div></td></tr><tr><td><p><code>rtGetInf.h</code></p><p><code>rtGetNaN.h</code></p><p><code>rt_nonfinite.h</code></p></td><td><p>Support nonfinite numbers</p><p>GRT—Generated code includes this file when one or more of these conditions apply:</p><div><ul><li><p>Your model contains S-functions.</p></li><li><p>The generated code requires nonfinite numbers.</p></li><li><p>Your model configuration selects parameter . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></li><li><p>Your model configuration selects parameter <strong>Classic call interface</strong>.</p></li></ul></div><p>ERT—Generated code includes this file when one or more of these conditions apply:</p><div><ul><li><p>Your model contains S-functions.</p></li><li><p>The generated code requires nonfinite numbers.</p></li><li><p>Your model configuration selects parameter . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></li></ul></div></td></tr><tr><td><p><code>rt_defines.h</code></p></td><td><p>Contains type definitions for special mathematical constants (such as π and <em>e</em>) and defines the <code>UNUSED_PARAMETER</code> macro</p><a name="d124e59661"></a><p>GRT and ERT—Generated code includes this file when either:</p><div><ul><li><p>The generated code requires a mathematical constant definition.</p></li><li><p>The function body does not access a required model function argument.</p></li></ul></div></td></tr><tr><td><p><code>rt_logging.h</code></p></td><td><p>Supports MAT-file logging and includes:</p><div><pre>rtwtypes.h
builtin_typeid_types.h
multiword_types.h
rt_mxclassid.h
rtw_matlogging.h
</pre></div><a name="d124e59678"></a><p>GRT—Generated code includes this file.</p><p>ERT—Generated code includes this file when you model configuration selects parameter . See <a href="https://www.mathworks.com/help/rtw/ref/matfilelogging.html">MAT-file logging</a>.</p></td></tr><tr><td><p><code>rt_mxclassid.h</code></p></td><td><p>Defines <code>mxArray</code> class ID enumerations</p><p>GRT and ERT—Generated code includes this file when the code includes <code>rt_logging.c</code>.</p></td></tr><tr><td><p><code>rtw_continuous.h</code></p></td><td><p>Supports continuous time</p><a name="d124e59707"></a><p>GRT—Generated code includes this file when the code includes <code>simstruc_types.h</code>.</p><p>ERT—Generated code includes this file when your model configuration selects parameter <strong>Support: continuous time</strong> and when the code does not already include <code>simstruc.h</code>.</p></td></tr><tr><td><p><code>rtw_extmode.h</code></p></td><td><p>Supports external mode</p><a name="d124e59725"></a><p>GRT—Generated code includes this file when the code includes <code>simstruc_types.h</code>.</p><p>ERT—Generated code includes this file when your model configuration selects external mode and when the code does not already include <code>simstruc.h</code>.</p></td></tr><tr><td><p><code>rtw_matlogging.h</code></p></td><td><p>Supports MAT-file logging</p><a name="d124e59741"></a><p>GRT—Generated code includes this file when the code includes <code>simstruc_types.h</code> and <code>rt_logging.h</code>.</p><p>ERT—Generated code includes this file when the code includes <code>rt_logging.h</code>.</p></td></tr><tr><td><p><code>rtw_solver.h</code></p></td><td><p>Supports continuous states</p><a name="d124e59759"></a><p>GRT—Generated code includes this file when the code includes <code>simstruc_types.h</code>.</p><p>ERT—Generated code includes this file when your model configuration selects parameter <strong>Support: continuous time</strong> and when the code does not already include <code>simstruc.h</code>.</p></td></tr><tr><td><p><code>rtwtypes.h</code></p></td><td><p>Defines code generator data types</p><p>GRT—Generated code includes this file. Uses a verbose version of the file, which includes <code>tmwtypes.h</code>.</p><p>ERT—Generated code includes this file if one of these conditions applies:</p><div><ul><li><p><strong>Data type replacement</strong> is set to <code>Use coder typedefs</code>.</p></li><li><p><strong>Data type replacement</strong> is set to <code>Use C data types with fixed-width integers</code> and <strong>Coder typedefs compatibility</strong> is selected.</p></li></ul></div><p>See <a href="https://www.mathworks.com/help/rtw/ug/build-process-files.html#f1159207">rtwtypes.h</a>.</p><p>The code generator overwrites the previously generated rtwtypes.h when you enable (previously disabled) support for:</p><div><ul><li><p>Complex numbers (<code>SupportComplex</code> set to <code>'on'</code>).</p></li><li><p>Noninlined S-functions (<code>SupportNonInlinedSFcns</code> set to <code>'on'</code>)</p></li></ul></div><p>To avoid rewriting <code>rtwtypes.h</code>, you can:</p><div><ul><li><p>Specify support for complex datatypes for your models even if the models do not currently use complex data types.</p></li><li><p>Disable support for noninlined S-functions. In this case, the use of a noninlined S-function produces an error. To avoid the error, convert the S-function to an inlined S-function. For more information, see <a href="https://www.mathworks.com/help/ecoder/ug/inlining-s-functions.html">Inlining S-Functions</a><span role="cross_prod"> (Embedded Coder)</span>.</p></li></ul></div></td></tr><tr><td><p><code>simstruc.h</code></p></td><td><p>Supports calling noninlined S-functions that use the <code>Simstruct</code> definition; also includes:</p><div><pre>limits.h
string.h
tmwtypes.h
simstruc_types.h
</pre></div><a name="d124e59840"></a><p>GRT—Generated code includes this file.</p><p>ERT—Generated code includes this file when either:</p><div><ul><li><p>Your model uses noninlined S-functions.</p></li><li><p>Your model configuration selects parameter <strong>Classic call interface</strong>.</p></li></ul></div></td></tr><tr><td><p><code>simstruc_types.h</code></p></td><td><p>Provides definitions that the generated code uses and includes the header files:</p><div><pre>rtw_matlogging.h
rtw_extmode.h
rtw_continuous.h
rtw_solver.h
sysran_types.h
</pre></div><a name="d124e59861"></a><p>GRT—Generated code includes this file when the code includes <code>rtwtypes.h</code>.</p><p>ERT—Generated code does not include this file. For ERT, <code>rtwtypes.h</code> contains definitions, and <code><em><code>model</code></em>.h</code> contains header files.</p></td></tr><tr><td><p><code>sysran_types.h</code></p></td><td><p>Supports external mode</p><a name="d124e59881"></a><p>GRT—Generated code includes this file when the code includes <code>simstruc_types.h</code>.</p><p>ERT—Generated code includes this file when your model configuration selects external mode and when the code does not already include <code>simstruc.h</code>.</p></td></tr><tr><td><p><code>zero_crossing_types.h</code></p></td><td><p>Contains zero-crossing definitions for models with triggered subsystems where the trigger is rising, falling, or either. File is generated only if required by the model as determined by the data type of the trigger signal.</p><p>GRT—Generated code does not include this file for GRT code generation targets.</p><p>ERT—Generated code includes this file when a model has a conditionally executed subsystem where a trigger uses zero crossing detection.</p><p>If generated, the content of <code>zero_crossing_types.h</code> is always the same.</p></td></tr></tbody></table>

## Related Topics

- [Manage Build Process Folders](https://www.mathworks.com/help/rtw/ug/build-process-folders.html)
- [Manage Build Process Files](https://www.mathworks.com/help/rtw/ug/build-process-files.html)
- [Add Build Process Dependencies](https://www.mathworks.com/help/rtw/ug/add-build-process-dependencies.html)
- [Build Process Support for File and Folder Names](https://www.mathworks.com/help/rtw/ug/enable-build-process-for-folder-names-with-spaces.html)
- [Build Process Workflow for Real-Time Systems](https://www.mathworks.com/help/rtw/ug/build-process-workflow-for-real-time-systems.html)
